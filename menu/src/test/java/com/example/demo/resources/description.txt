Unit-тесты (модульные тесты)

1. Проверка, ставил ли пользователь оценку блюду
Убеждаемся, что сервис корректно определяет, оценивал ли текущий пользователь конкретное блюдо.

2. Поведение при отсутствии пользователя в контексте
Если пользователь не определён (нет авторизации), сервис корректно возвращает отрицательный результат, без ошибок.

3. Обработка ошибок репозитория
Если при обращении к базе данных возникает ошибка, сервис не падает и возвращает безопасный результат.

4. Корректность вызова репозитория
Проверяется, что сервис вызывает репозиторий с правильными параметрами (ID блюда и пользователя).

5. Отсутствие лишних обращений к базе
Убеждаемся, что при определённых условиях сервис вообще не делает запросов к базе данных.




API-тесты (тесты поведения сервиса)

1. Успешная установка оценки блюду
Пользователь, который заказывал блюдо ранее, может поставить оценку, и она корректно сохраняется.

2. Запрет повторной оценки
Пользователь не может поставить оценку одному и тому же блюду дважды.

3. Редактирование существующей оценки
Пользователь может изменить ранее поставленную оценку, и она корректно обновляется.

4. Получение оценки пользователя
Сервис возвращает оценку пользователя для блюда или сообщает, что оценки нет.

5. Удаление оценок при удалении блюда
При удалении блюда все связанные с ним оценки удаляются корректно.